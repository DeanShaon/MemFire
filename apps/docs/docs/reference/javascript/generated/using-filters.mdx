---
id: using-filters
title: "Using Filters"
slug: /using-filters
custom_edit_url: https://github.com/supabase/supabase/edit/master/spec/supabase_js_v2.yml
---

Filters allow you to only return rows that match certain conditions.

Filters can be used on `select()`, `update()`, `upsert()`, and `delete()` queries.

If a Postgres function returns a table response, you can also apply filters.

### Applying Filters

Filters must be applied after any of `select()`, `update()`, `upsert()`,
`delete()`, and `rpc()` and before
[modifiers](/docs/reference/javascript/using-modifiers).

```ts
const { data, error } = await supabase
  .from('cities')
  .select('name, country_id')
  .eq('name', 'The Shire')    // Correct

const { data, error } = await supabase
  .from('cities')
  .eq('name', 'The Shire')    // Incorrect
  .select('name, country_id')
```

### Chaining

Filters can be chained together to produce advanced queries. For example,
to query cities with population between 1,000 and 10,000:

```ts
const { data, error } = await supabase
  .from('cities')
  .select('name, country_id')
  .gte('population', 1000)
  .lt('population', 10000)
```

### Conditional Chaining

Filters can be built up one step at a time and then executed. For example:

```ts
const filterByName = null
const filterPopLow = 1000
const filterPopHigh = 10000

let query = supabase
  .from('cities')
  .select('name, country_id')

if (filterByName)  { query = query.eq('name', filterByName) }
if (filterPopLow)  { query = query.gte('population', filterPopLow) }
if (filterPopHigh) { query = query.lt('population', filterPopHigh) }

const { data, error } = await query
```

### Filter by values within a JSON column

<Tabs scrollable size="small" type="underlined" defaultActiveId="schema">
<TabPanel id="schema" label="Schema">

  ```sql
  create table
    users (
      id int8 primary key,
      name text,
      address jsonb
    );

  insert into
    users (id, name, address)
  values
    (1, 'Michael', '{ "postcode": 90210 }'),
    (2, 'Jane', null);
  ```

</TabPanel>
<TabPanel id="js" label="JavaScript">

  ```ts
  const { data, error } = await supabase
    .from('users')
    .select()
    .eq('address->postcode', 90210)
  ```

</TabPanel>
<TabPanel id="result" label="Result">

  ```json
  {
    "data": [
      {
        "id": 1,
        "name": "Michael",
        "address": {
          "postcode": 90210
        }
      }
    ],
    "status": 200,
    "statusText": "OK"
  }
  ```

</TabPanel>
</Tabs>

### Filter Foreign Tables

You can filter on foreign tables in your `select()` query using dot
notation:

<Tabs scrollable size="small" type="underlined" defaultActiveId="schema">
<TabPanel id="schema" label="Schema">

  ```sql
  create table
    countries (id int8 primary key, name text);
  create table
    cities (
      id int8 primary key,
      country_id int8 not null references countries,
      name text
    );

  insert into
    countries (id, name)
  values
    (1, 'Germany'),
    (2, 'Indonesia');
  insert into
    cities (id, country_id, name)
  values
    (1, 2, 'Bali'),
    (2, 1, 'Munich');
  ```

</TabPanel>
<TabPanel id="js" label="JavaScript">

  ```ts
  const { data, error } = await supabase
    .from('countries')
    .select(`
      name,
      cities!inner (
        name
      )
    `)
    .eq('cities.name', 'Bali')
  ```

</TabPanel>
<TabPanel id="result" label="Result">

  ```json
  {
    "data": [
      {
        "name": "Indonesia",
        "cities": [
          {
            "name": "Bali"
          }
        ]
      }
    ],
    "status": 200,
    "statusText": "OK"
  }
  ```

</TabPanel>
</Tabs>