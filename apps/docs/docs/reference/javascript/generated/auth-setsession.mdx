---
id: auth-setsession
title: "setSession()"
slug: /auth-setsession
custom_edit_url: https://github.com/supabase/supabase/edit/master/spec/supabase_js_v2.yml
---

设置当前会话的会话数据。如果当前会话已经过期，setSession将负责刷新它以获得一个新的会话。
如果当前会话中的刷新令牌无效，并且当前会话已经过期，将产生一个错误。
如果当前会话不包含expires_at字段，setSession将使用访问令牌中定义的exp claim。

```js
  const { data, error } = supabase.auth.setSession({refresh_token, access_token})
```


## 参数


<ul className="method-list-group">
  
<li className="method-list-item">
  <h4 className="method-list-item-label">
    <span className="method-list-item-label-name">
      currentSession
    </span>
    <span className="method-list-item-label-badge required">
      required
    </span>
    <span className="method-list-item-validation">
      <code>object</code>
    </span>
  </h4>
  <div class="method-list-item-description">

当前的会话，它至少包含一个访问令牌和刷新令牌。

  </div>
  
<ul className="method-list-group">
  <h5 class="method-list-title method-list-title-isChild expanded">特性</h5>

<li className="method-list-item">
  <h4 className="method-list-item-label">
    <span className="method-list-item-label-name">
      refresh_token
    </span>
    <span className="method-list-item-label-badge required">
      required
    </span>
    <span className="method-list-item-validation">
      <code>string</code>
    </span>
  </h4>
  <div class="method-list-item-description">

未提供说明。

  </div>
  
</li>


<li className="method-list-item">
  <h4 className="method-list-item-label">
    <span className="method-list-item-label-name">
      access_token
    </span>
    <span className="method-list-item-label-badge required">
      required
    </span>
    <span className="method-list-item-validation">
      <code>string</code>
    </span>
  </h4>
  <div class="method-list-item-description">

未提供说明。

  </div>
  
</li>

</ul>

</li>

</ul>


##注意

- `setSession()`需要一个刷新令牌和访问令牌来获得一个新的会话。
- 刷新令牌只能使用一次，以获得一个新的会话。
- [刷新令牌](/docs/reference/auth/config#refresh_token_rotation_enabled)在所有项目中默认启用，以防止重放攻击。
- 你可以配置[`REFRESH_TOKEN_REUSE_INTERVAL`](https://supabase.com/docs/reference/auth/config#refresh_token_reuse_interval)，它提供了一个短暂的窗口，在发生并发或离线问题时，同一个刷新令牌可以被多次使用。
- 如果你使用React Native，你需要通过[rn-nodeify](https://github.com/tradle/rn-nodeify)等库安装一个Buffer polyfill，以正确使用该库。










## 示例

### 设置会话

从`refresh_token`和`access_token`中设置会话数据，并返回当前会话，如果令牌无效则返回错误。

```js
  const { data, error } = supabase.auth.setSession({refresh_token, access_token})
```